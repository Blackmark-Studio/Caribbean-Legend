

void ApplyMigration(ref migrationState) {
	ref refShip;
	makeref(refShip,ShipsTypes[SHIP_BOAT]);
	refship.icons.FirstIconPos = 0+0*16;
	refship.icons.SecondIconPos = 0+0*16 + 1;
	
	//////////////////////////////////////////////////////////////////////////
	//// ОРДИНАРНЫЕ КОРАБЛИ
	//////////////////////////////////////////////////////////////////////////		
	///////////////////////////////////////////////////////////////////////////
	//// Баркас - универсал
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_TARTANE]);
	refship.icons.FirstIconPos = 0+0*16;
	refship.icons.SecondIconPos = 0+0*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Тартана - универсал
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_WAR_TARTANE]);
	refship.icons.FirstIconPos = 2+0*16;
	refship.icons.SecondIconPos = 2+0*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Люггер - универсал
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_LUGGER]);
	refship.icons.FirstIconPos = 10+1*16;
	refship.icons.SecondIconPos = 10+1*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Обычная шхуна - универсал
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_SCHOONER]);
	refship.icons.FirstIconPos = 6+0*16;
	refship.icons.SecondIconPos = 6+0*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Бригантина - универсал
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_BRIGANTINE]);
	refship.icons.FirstIconPos = 14+1*16;
	refship.icons.SecondIconPos = 14+1*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Полакр - универсал
	///////////////////////////////////////////////////////////////////////////	
	makeref(refShip,ShipsTypes[SHIP_POLACRE]);
	refship.icons.FirstIconPos = 10+2*16;
	refship.icons.SecondIconPos = 10+2*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Ост-Индец - универсал
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_EASTINDIAMAN]);
	refship.icons.FirstIconPos = 6+1*16;
	refship.icons.SecondIconPos = 6+1*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Баркентина - торговый
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_BARKENTINE]);
	refship.icons.FirstIconPos = 8+0*16;
	refship.icons.SecondIconPos = 8+0*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Барк - торговец
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_BARQUE]);
	refship.icons.FirstIconPos = 4+0*16;
	refship.icons.SecondIconPos = 4+0*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Флейт  - торговый
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_FLEUT]);
	refship.icons.FirstIconPos = 12+0*16;
	refship.icons.SecondIconPos = 12+0*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Пинас - торговый
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_PINNACE]);
	refship.icons.FirstIconPos = 0+1*16;
	refship.icons.SecondIconPos = 0+1*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Навио - торговый
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_NAVIO]);
	refship.icons.FirstIconPos = 4+1*16;
	refship.icons.SecondIconPos = 4+1*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Курьерский люггер - рейдер
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_CAREERLUGGER]);
	refship.icons.FirstIconPos = 8+1*16;
	refship.icons.SecondIconPos = 8+1*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Военная шхуна - рейдер
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_SCHOONER_W]);
	refship.icons.FirstIconPos = 2+2*16;
	refship.icons.SecondIconPos = 2+2*16 + 1;
	
	//////////////////////////////////////////////////////////////////////////
	//// Шебека - рейдер (вертлявый)
	//////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_XebekVML]);
	refship.icons.FirstIconPos = 8+2*16;
	refship.icons.SecondIconPos = 8+2*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Бриг - рейдер
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_BRIG]);
	refship.icons.FirstIconPos = 0+2*16;
	refship.icons.SecondIconPos = 0+2*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Корвет - рейдер
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_CORVETTE]);
	refship.icons.FirstIconPos = 6+2*16;
	refship.icons.SecondIconPos = 6+2*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Фрегат - рейдер
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_FRIGATE]);
	refship.icons.FirstIconPos = 14+2*16;
	refship.icons.SecondIconPos = 14+2*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Шлюп - военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_SLOOP]);
	refship.icons.FirstIconPos = 12+1*16;
	refship.icons.SecondIconPos = 12+1*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Шнява - военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_SHNYAVA]);
	refship.icons.FirstIconPos = 10+0*16;
	refship.icons.SecondIconPos = 10+0*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Каравелла - военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_CARAVEL]);
	refship.icons.FirstIconPos = 14+0*16;
	refship.icons.SecondIconPos = 14+0*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Галеон - военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_GALEON_L]);
	refship.icons.FirstIconPos = 4+2*16;
	refship.icons.SecondIconPos = 4+2*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Тяжелый Галеон - военный (медленный)
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_GALEON_H]);
	refship.icons.FirstIconPos = 12+2*16;
	refship.icons.SecondIconPos = 12+2*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Тяжелый фрегат - военный (быстрый)
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_FRIGATE_H]);
	refship.icons.FirstIconPos = 0+3*16;
	refship.icons.SecondIconPos = 0+3*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Военный корабль - военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_LINESHIP]);
	refship.icons.FirstIconPos = 2+3*16;
	refship.icons.SecondIconPos = 2+3*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Французский линейный корабль - военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_LSHIP_FRA]);
	refship.icons.FirstIconPos = 4+3*16;
	refship.icons.SecondIconPos = 4+3*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Голландский линейный корабль - военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_LSHIP_HOL]);
	refship.icons.FirstIconPos = 6+3*16;
	refship.icons.SecondIconPos = 6+3*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Испанский линейный корабль - военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_LSHIP_SPA]);
	refship.icons.FirstIconPos = 8+3*16;
	refship.icons.SecondIconPos = 8+3*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Английский линейный корабль - военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_LSHIP_ENG]);
	refship.icons.FirstIconPos = 10+3*16;
	refship.icons.SecondIconPos = 10+3*16 + 1;
	
	//////////////////////////////////////////////////////////////////////////
	//// КВЕСТОВЫЕ КОРАБЛИ
	//////////////////////////////////////////////////////////////////////////	
	//////////////////////////////////////////////////////////////////////////
	//// Легкая шебека "Мэйфэнг" -квестовый рейдер
	//////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_MAYFANG]);
	refship.icons.FirstIconPos = 12+3*16;
	refship.icons.SecondIconPos = 12+3*16 + 1;
	
	//////////////////////////////////////////////////////////////////////////
	//// Приватирский кеч "Мираж" - квестовый военный
	//////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_MIRAGE]);
	refship.icons.FirstIconPos = 14+3*16;
	refship.icons.SecondIconPos = 14+3*16 + 1;
	
	//////////////////////////////////////////////////////////////////////////
	//// Военный кеч "Химера" - квестовый военный (улучшение миража)
	//////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_HIMERA]);
	refship.icons.FirstIconPos = 2+5*16;
	refship.icons.SecondIconPos = 2+5*16 + 1;

	//////////////////////////////////////////////////////////////////////////
	//// Патрульный бриг "Валькирия"  - квестовый рейдер
	//////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_VALCIRIA]);
	refship.icons.FirstIconPos = 0+4*16;
	refship.icons.SecondIconPos = 0+4*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Тяжелый корвет "Гриффондор" - квестовый рейдер
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_CORVETTE_QUEST]);
	refship.icons.FirstIconPos = 2+4*16;
	refship.icons.SecondIconPos = 2+4*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Полакр Тореро - квестовый универсал
	///////////////////////////////////////////////////////////////////////////	
	makeref(refShip,ShipsTypes[SHIP_POLACRE_QUEST]);
	refship.icons.FirstIconPos = 4+4*16;
	refship.icons.SecondIconPos = 4+4*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Быстрый фрегат "Фортуна" - квестовый рейдер (гиперлейт, поэтому завышены статы)
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_FRIGATE_L]);
	refship.icons.FirstIconPos = 6+4*16;
	refship.icons.SecondIconPos = 6+4*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Галеон Эль Касадор - квестовый военный (по логике - это облегченный тяжелый галеон, выбросили пушки - быстрее плывем)
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_ELCASADOR]);
	refship.icons.FirstIconPos = 12+4*16;
	refship.icons.SecondIconPos = 12+4*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// Эклятон квестовый французский линейный корабль
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_ECLIATON]);
	refship.icons.FirstIconPos = 14+4*16;
	refship.icons.SecondIconPos = 14+4*16 + 1;
	

	///////////////////////////////////////////////////////////////////////////
	//// пинк - квестовый военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_PINK]);
	refship.icons.FirstIconPos = 4+5*16;
	refship.icons.SecondIconPos = 4+5*16 + 1;

	
	///////////////////////////////////////////////////////////////////////////
	//// Галеон Святое Милосердие - квестовый военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_GALEON_SM]);
	refship.icons.FirstIconPos = 6+5*16;
	refship.icons.SecondIconPos = 6+5*16 + 1;
	
	
	///////////////////////////////////////////////////////////////////////////
	//// Патрульная шнява "Леди Бет" - квестовый военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_LADYBETH]);
	refship.icons.FirstIconPos = 8+5*16;
	refship.icons.SecondIconPos = 8+5*16 + 1;
	
	
	///////////////////////////////////////////////////////////////////////////
	//// Мементо - квестовый военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_MEMENTO]);
	refship.icons.FirstIconPos = 10+5*16;
	refship.icons.SecondIconPos = 10+5*16 + 1;
	
	// --> квестовые корабли - заглушки
	///////////////////////////////////////////////////////////////////////////
	//// квестовый корабль №0 - 6-ый класс
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_QUEST0]);
	refship.icons.FirstIconPos = 12+1*16;
	refship.icons.SecondIconPos = 12+1*16 + 1;


	///////////////////////////////////////////////////////////////////////////
	//// квестовый корабль №1 - 5-ый класс
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_QUEST1]);
	refship.icons.FirstIconPos = 2+2*16;
	refship.icons.SecondIconPos = 2+2*16 + 1;
	
	
	///////////////////////////////////////////////////////////////////////////
	//// квестовый корабль №2 - 4-ый класс
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_QUEST2]);
	refship.icons.FirstIconPos = 0+2*16;
	refship.icons.SecondIconPos = 0+2*16 + 1;
	
	
	///////////////////////////////////////////////////////////////////////////
	//// квестовый корабль №3 - 4-ый класс
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_QUEST3]);
	refship.icons.FirstIconPos = 14+0*16;
	refship.icons.SecondIconPos = 14+0*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// квестовый корабль №4 - 3-ый класс
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_QUEST4]);
	refship.icons.FirstIconPos = 4+2*16;
	refship.icons.SecondIconPos = 4+2*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// квестовый корабль №5 - 3-ый класс
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_QUEST5]);
	refship.icons.FirstIconPos = 6+2*16;
	refship.icons.SecondIconPos = 6+2*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// квестовый корабль №6 - 2-ый класс
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_QUEST6]);
	refship.icons.FirstIconPos = 14+2*16;
	refship.icons.SecondIconPos = 14+2*16 + 1;
	
	///////////////////////////////////////////////////////////////////////////
	//// квестовый корабль №7 - 2-ый класс
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_QUEST7]);
	refship.icons.FirstIconPos = 0+3*16;
	refship.icons.SecondIconPos = 0+3*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// квестовый корабль №8 - 1-ый класс
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_QUEST8]);
	refship.icons.FirstIconPos = 8+3*16;
	refship.icons.SecondIconPos = 8+3*16 + 1;
	
	
	// <-- квестовые корабли - заглушки
	
	///////////////////////////////////////////////////////////////////////////
	//// Проклятый "Калеуче" - квестовый
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_CURSED_FDM]);
	refship.icons.FirstIconPos = 8+4*16;
	refship.icons.SecondIconPos = 8+4*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Копия "Калеуче" - квестовый военный
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_FDM]);
	refship.icons.FirstIconPos = 10+4*16;
	refship.icons.SecondIconPos = 10+4*16 + 1;

	///////////////////////////////////////////////////////////////////////////
	//// Отреставрированный "Калеуче" - квестовый
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_RENOVATED_FDM]);
	refship.icons.FirstIconPos = 0+5*16;
	refship.icons.SecondIconPos = 0+5*16 + 1;
	DeleteAttribute(refship, "EmblemedSails.normalTex");

	///////////////////////////////////////////////////////////////////////////
	//// Линейный корабль "Реус де Сан-Педро" - квестовый
	///////////////////////////////////////////////////////////////////////////
	makeref(refShip,ShipsTypes[SHIP_LSHIP_QUEST]);
	refship.icons.FirstIconPos = 8+3*16;
	refship.icons.SecondIconPos = 8+3*16 + 1;
	DeleteAttribute(refship, "EmblemedSails.normalTex");
}
